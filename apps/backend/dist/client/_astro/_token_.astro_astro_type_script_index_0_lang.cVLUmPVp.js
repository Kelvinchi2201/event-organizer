import{k as b,B as w}from"./endpoints.DkJ3glok.js";import{c}from"./notificiation.DEfUooIU.js";document.querySelector("#verify-text");const p=window.location.pathname.split("/changesPassword/")[1],m=`${w}/api/users/changesPassword`,i=document.querySelector("#change-password-form"),a=document.querySelector("#password"),s=document.querySelector("#confirm-password"),o=document.querySelector("#button-change-password"),v=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/;console.log(i,s,a);const t={isPasswordValid:!1,doPasswordsMatch:!1};function d(e,r){r?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function l(){const{isPasswordValid:e,doPasswordsMatch:r}=t;o.disabled=!e||!r}a.addEventListener("input",()=>{const e=v.test(a.value);t.isPasswordValid=e,d(a,e);const r=a.value===s.value&&s.value.length>0;t.doPasswordsMatch=r,d(s,r),l()});s.addEventListener("input",()=>{const e=a.value===s.value&&s.value.length>0;t.doPasswordsMatch=e,d(s,e),l()});i.addEventListener("submit",async e=>{e.preventDefault();const{isPasswordValid:r,doPasswordsMatch:u}=t;if(!r||!u){alert("Por favor, verifica que la contraseña cumpla los requisitos.");return}try{o.disabled=!0,o.innerText="Cambiando contraseña...";const n=await b.patch(m,{json:{token:p,password:a.value}}).json();c({title:"Contraseña cambiada!",description:"Se ha cambiado la contraseña correctamente",type:"success"}),setTimeout(()=>{window.location.href="/login"},2500)}catch(n){o.disabled=!1,o.innerText="Cambiar contraseña",console.error(n),c({title:"Ups! Hubo un error",description:errorData?.error??"Sin mensaje",type:"error"})}});
