import{k as w,B as f}from"./index.BXL97NTB.js";import{c as m}from"./notificiation.DEfUooIU.js";const v=document.querySelector("#register-form"),c=document.querySelector("#name"),i=document.querySelector("#email"),o=document.querySelector("#password"),r=document.querySelector("#confirm-password"),b=document.querySelector("#button-register"),V=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,g=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,y=/^[A-Z][a-z]*[ ][A-Z][a-z]{3,}[ ]{0,1}$/,s={isEmailValid:!1,isPasswordValid:!1,doPasswordsMatch:!1,isNameValid:!1};function t(e,a){a?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function n(){const{isEmailValid:e,isPasswordValid:a,doPasswordsMatch:l,isNameValid:u}=s;b.disabled=!e||!a||!l||!u}c.addEventListener("input",()=>{const e=y.test(c.value);s.isNameValid=e,t(c,e),n()});i.addEventListener("input",()=>{const e=V.test(i.value);s.isEmailValid=e,t(i,e),n()});o.addEventListener("input",()=>{const e=g.test(o.value);s.isPasswordValid=e,t(o,e);const a=o.value===r.value&&r.value.length>0;s.doPasswordsMatch=a,t(r,a),n()});r.addEventListener("input",()=>{const e=o.value===r.value&&r.value.length>0;s.doPasswordsMatch=e,t(r,e),n()});v.addEventListener("submit",async e=>{e.preventDefault();const{isEmailValid:a,isPasswordValid:l,doPasswordsMatch:u}=s;if(!(!a||!l||!u))try{await w.post(`${f}/api/users`,{json:{name:c.value,email:i.value,password:o.value}});for(const d in s)s[d]=!1;v.reset(),[i,o,r].forEach(d=>{t(d)}),n(),m({title:"Usuario creado!",description:"Se ha enviado un correo de verificacion a su bandeja de correo",type:"success"})}catch(d){const p=await d?.response?.json();m({title:"Ups! Hubo un error",description:p?.error??"Sin mensaje",type:"error"})}});
