import{c as d}from"./notificiation.DEfUooIU.js";import{k as v,B as f}from"./index.BXL97NTB.js";import{A as g}from"./auth.module.BlJkjLy5.js";import{g as p}from"./guest.module.BG9mC0mU.js";import"./index.CViUNx8d.js";const y=await g.getLoggedUser(),I=y.id,b=`${f}/api/events/events/${I}`,o=document.querySelector("#indications"),w=document.querySelector("#form"),i=document.querySelector("#guest-email"),c=document.querySelector("#event-id"),L=document.querySelector("#form-btn"),r=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,S=/^[\w\s.,-ñÑáéíóúÁÉÍÓÚ¡!¿?()"'\/@#%\n\r]*$/,n={isEmailValid:!1,isIndicationsValid:!0};function l(e,t){t?(e.classList.remove("border-red-500"),e.classList.add("border-green-500")):(e.classList.remove("border-green-500"),e.classList.add("border-red-500")),e.value===""&&e.classList.remove("border-red-500","border-green-500")}function m(){const e=i.value.split(/,|\s+|\n+/).filter(t=>r.test(t.trim()));n.isEmailValid=e.length>0,L.disabled=!n.isEmailValid}i.addEventListener("input",()=>{const t=i.value.split(/,|\s+|\n+/).filter(s=>s.trim()!=="").every(s=>r.test(s.trim()));l(i,t),m()});o.addEventListener("input",()=>{const e=S.test(o.value);n.isIndicationsValid=e,l(o,e)});const V=await v.get(b,{credentials:"include"}).json();V.forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.name,c.appendChild(t)});w.addEventListener("submit",async e=>{e.preventDefault();const s=i.value.trim().split(/,|\s+|\n+/).map(a=>a.trim()).filter(a=>r.test(a));if(s.length===0){d({type:"error",description:"Por favor, ingresa al menos un correo electrónico válido."});return}for(const a of s){const u={guest_name:a.split("@")[0],events_id:c.value,guest_email:a,indications:o.value||""};await p.addGuestTolist(u)}d({type:"success",title:`${s.length} invitado(s) agregado(s) a la lista`}),i.value="",o.value="",l(i,!1),n.isEmailValid=!1,m()});
